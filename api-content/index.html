{"posts":[{"title":"WSLé…ç½®è®°å½•","content":"ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„WSLï¼Œç›¸å¯¹æ›´åŠ ç®€å•æ˜“ç”¨ wslå®‰è£… bug è§£å†³ï¼šThe Windows Subsystem for Linux optional component is not enabled. Please enable it and try again. åœ¨ Windows 11 ä¸Šå®‰è£… Ubuntu 22.04 å­ç³»ç»Ÿæ—¶é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³• - é©¬ä¸é¾™çŒªçš„åšå®¢ ä½¿ç”¨æ‰‹åŠ¨å®‰è£…å¯ä»¥æŒ‡å®šç›˜çš„ä½ç½® Manual installation steps for older versions of WSL | Microsoft Learn æ­¥éª¤åŒ…æ‹¬ï¼šæ‰“å¼€wslæœåŠ¡ã€æ‰“å¼€è™šæ‹ŸåŒ–å¹³å°(é‡å¯åç”Ÿæ•ˆ) ä¸‹è½½åŒ…ï¼Œè§£å‹ç¬¬ä¸€æ¬¡ï¼Œå†è§£å‹appx(x64)æ–‡ä»¶ å®‰è£…wslå‡çº§åŒ…(ç¬¬ä¸€æ­¥å¿…é¡»å®Œæˆå¹¶é‡å¯) åŒå‡»exeå®‰è£… wsl --update wsl --update --prerelease wslå…±äº«ä»£ç† [experimental] autoMemoryReclaim=gradual networkingMode=mirrored dnsTunneling=true firewall=true autoProxy=true æ›´æ–°åˆ°æœ€æ–°çš„wsl prereleaseåä¿®æ”¹ Site Unreachable wsl --manage Ubuntu --set-sparse true å¯ç”¨ç¨€ç– VHD å…è®¸ WSL2 çš„ç¡¬ç›˜ç©ºé—´è‡ªåŠ¨å›æ”¶ Site Unreachable dockerå®‰è£… æœ¬ä½“å®‰è£… å½»åº•æ‘†è„±docker-desktopï¼Œè®©ä½ åœ¨wslä¸­æ²¡æœ‰ä»»ä½•çƒ¦æ¼åœ°ä½¿ç”¨docker - å¼€å‘è°ƒä¼˜ - LINUX DO # æ›´æ–°åŒ…ç´¢å¼• sudo apt update # å®‰è£…ä¾èµ–åŒ… sudo apt install -y apt-transport-https ca-certificates curl software-properties-common # æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # æ·»åŠ  Docker å®˜æ–¹ä»“åº“ echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null # æ›´æ–°åŒ…ç´¢å¼• sudo apt update # å®‰è£… Docker sudo apt install -y docker-ce docker-ce-cli containerd.io # å¯åŠ¨å¹¶å¯ç”¨ Docker æœåŠ¡ sudo systemctl start docker sudo systemctl enable docker # éªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸ docker --version # æŸ¥çœ‹ä¿¡æ¯ sudo docker info å®‰è£…å®Œè‡ªå¸¦compose é…ç½®WSLçš„systemå‘½ä»¤ sudo nano /etc/wsl.conf æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š [boot] systemd=true æˆ–è€…ä½¿ç”¨service æ¢æºï¼Ÿä»£ç†ï¼ æœ€æ–°ç‰ˆçš„wslæ”¯æŒmirror netï¼Œéœ€è¦wsl --update æ¥ç€wsl --update --pre-release æ¢æºæ— æ³•è§£å†³æ‹‰å–é•œåƒé—®é¢˜ æœ€ä½³åŠæ³•ï¼Œä¿®æ”¹dockerä»£ç†ï¼š Site Unreachable window wsl2çš„ubuntuå¦‚ä½•é…ç½®ä»£ç†è·å–docker image_wsl docker proxy-CSDNåšå®¢ é…ç½®clientä»£ç†å¯è§£å†³docker composeé—®é¢˜ æ²¡æœ‰ç”¨ å³,åœ¨WSL2ä¸­é€šè¿‡é€šç”¨æ–¹å¼å®‰è£…çš„docker. sudo vim /etc/default/docker è¾“å…¥: export HTTP_PROXY=&quot;http://127.0.0.1:1080&quot; export HTTPS_PROXY=&quot;http://127.0.0.1:1080&quot; export NO_PROXY=&quot;localhost,127.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.0.0.0/8&quot; ä»¥ä¸‹æ–¹æ³•æœ‰ç”¨ï¼ ### 1ã€åˆ›å»ºé…ç½®æ–‡ä»¶ sudo mkdir -p /etc/systemd/system/docker.service.d sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf ### 2ã€æ·»åŠ é…ç½® [Service] Environment=&quot;HTTP_PROXY=http://127.0.0.1:1080&quot; Environment=&quot;HTTPS_PROXY=http://127.0.0.1:1080&quot; Environment=&quot;NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp,&quot; ### 3ã€é‡å¯å®¹å™¨ sudo systemctl daemon-reload sudo systemctl restart docker 1panel è¿œç¨‹è¿ç»´å·¥å…· docker-compose file ","link":"https://yuchuanghui.github.io/post/wsl-pei-zhi-ji-lu/"},{"title":"è§£å†³pyinstalleræ‰“åŒ…é—®é¢˜","content":"é—®é¢˜ä¸€ å¦‚ä¸‹å›¾æ‰€ç¤ºæ–‡ä»¶ç»“æ„ â”œâ”€data â”œâ”€logs â””â”€QSS â””â”€QSS_IMG â”œâ”€main.exe â”œâ”€config.ini â”œâ”€powergram.json main.exeåœ¨è¿è¡Œæ—¶æ‰¾ä¸åˆ°éœ€è¦å¼•ç”¨çš„è·¯å¾„æ–‡ä»¶ï¼ˆconfig.iniã€powergram.jsonï¼‰å’Œæ–‡ä»¶å¤¹ï¼ˆdataã€logs) è§£å†³åŠæ³•ï¼š import sys import os if getattr(sys, 'frozen', False): # å¦‚æœç¨‹åºæ˜¯â€œå†·å†»â€çš„ï¼Œå³æ‰“åŒ…åçš„ç¨‹åº basedir = sys._MEIPASS else: # å¦‚æœç¨‹åºæ˜¯æ­£å¸¸è¿è¡Œçš„ basedir = os.path.dirname(__file__) # è·å–å…·ä½“çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„ filepath = os.path.join(basedir, 'your_file_or_folder_name') å°†éœ€è¦çš„pathæŒ‰ç…§exe/è„šæœ¬åˆ†åˆ«æ·»åŠ dirnameçš„æ¨¡å¼å³å¯è§£å†³ ","link":"https://yuchuanghui.github.io/post/jie-jue-pyinstaller-da-bao-wen-ti/"},{"title":"nginxåå‘ä»£ç†è¢«banæœåŠ¡å™¨","content":"nginxåå‘ä»£ç† åŸç† æ­£å‘ä»£ç†ï¼šä»£ç†å®¢æˆ·ç«¯ åå‘ä»£ç†ï¼šä»£ç†æœåŠ¡ç«¯ ç”¨é€”ä¹‹ä¸€ï¼šä¸€å°æœåŠ¡å™¨è¢«å¢™ï¼Œé‡‡ç”¨å¦ä¸€å°æœªè¢«å¢™çš„æœåŠ¡å™¨ä½œä¸ºä»£ç† åŸŸåA--&gt;æœåŠ¡å™¨A--&gt;åŸŸåB--&gt;æœåŠ¡å™¨A æ­¥éª¤ï¼š å®‰è£…nginx nginxé…ç½® \\#è®¾å®šè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨åˆ—è¡¨ \\#weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§ \\# upstream cheems{ \\# server https://yisiyuhui.top weight=1; \\# } \\# é‡‡ç”¨upstreamæ—¶--&gt;proxy_pass cheemsï¼Œä½†æ­¤å¤„åªéœ€è¦ä»£ç†ä¸€å°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿™ç§å†™æ³• server { \\#ä¾¦å¬çš„443ç«¯å£ listen 443 ssl; # managed by Certbot server_name yisiyuhui.buzz; ssl_certificate /etc/letsencrypt/live/yisiyuhui.buzz-0001/fullchain.pem; # managed by Certbot ssl_certificate_key /etc/letsencrypt/live/yisiyuhui.buzz-0001/privkey.pem; # managed by Certbot include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot location / { \\# proxy_pass 209.141.40.130:433; #åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œå’Œupstreamçš„åå­—ä¸€æ ·ï¼ˆæœ‰çš„è¯ï¼‰ proxy_pass https://yisiyuhui.top; #å¯ä»¥æ˜¯åŸŸåæˆ–è€…ip:port \\#ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®å¯åˆ é™¤ \\# proxy_redirect on; \\# #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; client_max_body_size 10m; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•° client_body_buffer_size 128k; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•° proxy_connect_timeout 300; #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶) proxy_send_timeout 300; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶) proxy_read_timeout 300; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶) proxy_buffer_size 4k; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å° proxy_buffers 4 32k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½® proxy_busy_buffers_size 64k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰ proxy_temp_file_write_size 64k; #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼  } } server { if ($host = yisiyuhui.buzz) { return 301 https://$host$request_uri; } # managed by Certbot server_name yisiyuhui.buzz; listen 80; return 404; # managed by Certbot } æ³¨æ„ï¼š BæœåŠ¡å™¨å­˜åœ¨è¡¨å•æ“ä½œæ—¶ï¼Œéœ€è¦æ³¨æ„è·¨åŸŸé—®é¢˜ï¼Œå³Aã€Bå‡éœ€è¦ä¸ºhttps nginxæœ‰æ—¶å€™ä¼šå‡ºç°modules-available modules-enabledçš„æ–‡ä»¶å¤¹ï¼Œå‡ºç°é…ç½®è¦†ç›–ï¼Œç„¶åconf.dä¸­é…ç½®æ— æ³•ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œä¸€èˆ¬ä¼šå‡ºç°åœ¨80ç«¯å£ã€‚ nginx å¸¸ç”¨å‘½ä»¤ nginx -s reload nginx -s run systemctl status nginx netstat | grep nginx ","link":"https://yuchuanghui.github.io/post/nginx-fan-xiang-dai-li-bei-ban-fu-wu-qi/"},{"title":"tryç³»åˆ—è¯­æ³•","content":"æ—¥è¯­å¤‡è€ƒä¸­----å…ˆä»å¤ä¹ è¯­æ³•å¼€å§‹ tryN3 V-ã¾ã™ï¼‹å§‹ã‚ãŸ ï½ã¦/ï½ã¦ã‹ã‚‰/ï½ãŸã‚‰ é•ã„ ï½ãŸã‚‰/ï½ã°/ï½ã¨/ï½ãªã‚‰ V-ã‚‹/ãªã„ï¼‹ã‚ˆã†ã«è¨€ã†/æ³¨æ„ã™ã‚‹/é ¼ã‚€/ä¼ãˆã‚‹ï¼šå‘½ä»¤ãƒ»ç¦æ­¢ãƒ»æŒ‡ç¤ºãƒ»åŠ©è¨€ãªã©ã‚’ä¼ã† ã‚“/ã®ã§ã™ V-ã¾ã™ï¼‹ãã†ã‚‚ãªã„/ãã†ã«ãªã„/ãã†ã«ã‚‚ãªã„ï¼šãªã•ãã† V-ã‚‹/V-ãªã„/Nï¼‹ã»ã© æ— è¿‡å»å½¢ ãã‚‰ã„ é•ã„ ã‚‚ â‘ ã‚‚ã¾ãŸ ç§ã‚‚ã»ã—ã„ ä¹Ÿ â‘¡åŒé¡ã®äº‹æŸ„ã‚’ä¸¦åˆ—ãƒ»åˆ—æŒ™ã™ã‚‹æ„ã‚’è¡¨ã™ åºƒãã‚‚ãªã„ã—ã›ã¾ããªãã¦ã€ã¡ã‚‡ã†ã©ã„ã„ â‘¢å…¨é¢çš„ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ èª°ã‚‚çŸ¥ã‚‰ãªã„ï¼èª°ã‚‚ãŒçŸ¥ã£ã¦ã‚‹ ä¸å®šç§°ã®æŒ‡ç¤ºèª+ã‚‚ ãµã‚Šã‚€ãã‚‚ã—ãªã„ ï¼è¿”äº‹ã‚‚ã—ãªã„ å‹•è©ã®é€£ç”¨å½¢ã‚„å‹•ä½œæ€§åè©ã«ä»˜ã„ã¦ï¼Œä¸‹ã«å¦å®šã®èªã‚’ä¼´ã„ï¼Œæ‰“ã¡æ¶ˆã—ã®æ„ã‚’å¼·ã‚ã¦è¡¨ã™ ä¸€åº¦ã‚‚è¡Œã£ãŸã“ã¨ãŒãªã„ æ•°è¯+ã‚‚ å…¨ç„¶ãªã„ â‘£ãŠãŠã‚ˆãã®ç¨‹åº¦ã‚’è¡¨ã™ã€‚â€¦ãã‚‰ã„ã€‚â€¦ã»ã©ã€‚ ä¸€é€±é–“ã‚‚ã‚ã‚Œã°ã§ãã‚‹ã§ã—ã‚‡ã† ã° æœ€å¤šï¼Œæœ€é«˜ â‘¤é©šããƒ»æ„Ÿå‹•ã®æ„ã‚’è¡¨ã™ å¼ºè°ƒ ç—…æ°—ã§äº”å¹´é–“ã‚‚å¯ãŸã¾ã¾ã§ã™/100ä¸‡å††ã‚‚ã™ã‚‹ã‚“ã˜ã‚ƒ å¼ºè°ƒæ•°é‡ å­ä¾›ã‚‚ã‚ã‹ã‚‹ æç«¯ä¾‹å­ æ—©ãã‚‚ã„ã¡ã­ã‚“ å‹ã¡ã‚‚è²·ã£ãŸã‚Š ã•ãˆ é•ã„ ã¦ ã„A ã„ /ãªA/Vã¾ã™å‹ ãŸã„ + ãŒã‚‹ è¡¨ç¤ºç¬¬ä¸‰äººç§°çš„æ„Ÿæƒ… å‚è€ƒ å‚è€ƒ2 ã¶ã‚‹ ã¨ãŸã‚“/ãªã‚Š/ã¨ãŠã‚‚ã†ã¨/ ä¸€â€¦â€¦å°± ~ã ã™ ï¼ æ€¥ã«å§‹ã¾ã£ãŸ ï½ã‚ˆã†ã¨ã™ã‚‹ï¼šä»Šã‹ã‚‰ï½ã—ã‚ˆã†ã¨æ€ã£ã¦ã€ï½ã—ã‚ˆã†ã¨é ‘å¼µã£ã¦ã„ã‚‹ã¨è¨€ã„ãŸã„ã€‚å¦å®šå½¢ã¯æ‰¹åˆ¤ã™ã‚‹æ°—æŒã¡ã‚’è¡¨ã™ã€‚æ‰“ç®—ç°åœ¨å¼€å§‹åš~ ã‚ˆã†ã¨æ€ã†ï¼šå¼ºè°ƒå†³å®šã€æ„å¿— ç›®çš„ V-ã‚‹/ãƒ¼ãªã„ï¼‹ã“ã¨ãŒ/ã‚‚ã‚ã‚‹ï¼šãŸã¾ã« æ„å¿—å‹•è©ï¼ç„¡æ„å¿—å‹•è© æ—¥æœ¬èªæ•™å¸«ã®åºƒå ´) ~ã•ã›ã¦ãŠã ã‹ã‚‰/ã®ã§/ãŸã‚ ã‚ˆã£ã¦ åŸå›  1 2 3 4 ã°ã‹ã‚Š ã°ã‹ã‚Šã‹ ãŸã°ã‹ã‚Š ã°ã‹ã‚Šã§ãªã æ¯æ—¥ã®ã‚“ã³ã‚Šæ—¥æœ¬èªæ•™å¸« N+ã«ã‚ˆã‚‹/ã‚ˆã£ã¦/ã‚ˆã‚Š ã‚ˆã‚‹ï¼‹åè© æ¯æ—¥ã®ã‚“ã³ã‚Šæ—¥æœ¬èªæ•™å¸« ã«ã‚ˆã£ã¦ ã«ã‚ˆã‚Š ã«ã‚ˆã‚‹ ã«ã‚ˆã£ã¦ã¯ N3 ã€œã«ã‚ˆã‚‹ï¼ã«ã‚ˆã‚Šï¼ã«ã‚ˆã£ã¦ï¼ˆã¯ï¼‰ ã«ã‚ˆã‚‹ã¨/ã«ã‚ˆã‚Œã° 1: è¡¨ç¤ºèµ„è®¯æˆ–è€…æ¶ˆæ¯æ¥æº ã«ã‚ˆã£ã¦ï¼šåŸå› ãƒ»æ ¹æ‹ ãƒ»æ‰‹æ®µ Bã¯Aã®ç›´æ¥ã®çµæœ ã‚’åˆ©ç”¨ã™ã‚‹ å‡­å€Ÿã€åˆ©ç”¨(æ–¹æ³•) ã‚’é€šã˜ã¦ï¼é€šã—ã¦ï¼šé€šè¿‡æŸç§é€”å¾„å®Œæˆäº†æŸäº‹ï¼Œé€šè¿‡ä¸­é—´å¾—äººã€æ‰‹æ®µã€äº‹ç‰©ï¼Œå¼ºè°ƒé€”å¾„ ã‚’çµŒç”±ã« åª’ä»‹ 1 2 3 æ™‚é–“ï¼‹ï½ ä¸€æ•´å¹´ é•ã„ï¼Ÿ ã«å¯¾ã—ã¦ï¼šåŠ¨ä½œå¯¹è±¡ã€è¡Œä¸ºã€å¯¹â€¦â€¦æ„Ÿæƒ…ã€æ•ˆæœ 1 2 3 4 å¯¾è±¡ï¼š ï¼ˆï¼‘ï¼‰è¡Œç‚ºãŒå‘ã‘ã‚‰ã‚Œã‚‹å¯¾è±¡ ï¼ˆï¼’ï¼‰è¡Œç‚ºã‚’å—ã‘ã¦åå¿œã™ã‚‹å¯¾è±¡ ï¼ˆï¼“ï¼‰æ„Ÿæƒ…ãƒ»å¿ƒçš„æ…‹åº¦ã®å‘ã‘ã‚‰ã‚Œã‚‹å¯¾è±¡ ï¼ˆï¼”ï¼‰åŠ¹æœãŒå‡ºã‚‹å¯¾è±¡ ã«ã¤ã„ã¦ ã¡ãŒã„ ã«å¯¾ã—ã¦ã® ã«å¯¾ã—ã¦ ãšã¤/ã”ã¨ã«/ã¤ãã«/ãŠæ°—ã« 1 2 3 4 5 6 æŒ‰ç…§ 1 ã‚ˆã†ã«/ã¿ãŸã„ã«/ãã† é•ã„ ã‚‰ã—ã„ ã‹ã®ã‚ˆã†ã  Nï¼‹ã‚‰ã—ã„ å……åˆ†è¡¨ç°~çš„ç‰¹ç‚¹ æ¡œãŒå’²ã„ãŸã‚‰æ˜¥ã‚‰ã—ã„å­£ç¯€ã«ãªã‚Šã¾ã—ãŸ éå»ï¼‹~ã‚Šã—ã¦ ï¼ ã‹ã‚‚ã—ã‚Œãªã„ å£èª éå»ï¼‹ã£ã¦ ï¼ ï½ã¦ã‚‚ å£èª Nï¼‹ã£ã¦ ï¼ ã¨ã„ã†/ã¯ ã«æ±ºã¾ã£ã¦ã„ã‚‹ï¼çµ¶å¯¾ã ã¨æ€ã† ã£ã‘ï¼ï½ã“ã¨ã¯ã‚ã‚‹ã‚“ã§ã™ã‹ ã°ã‚ˆã‹ã£ãŸï¼è‡ªåˆ† å¾Œæ‚” ä»–äºº æ®‹å¿µ Nãƒ»V-ã¦ï¼‹ã°ã‹ã‚Š V-ã¦ï¼‹ã°ã‹ã‚Šã„ã‚‹ V-ã‚‹/V-ã¦ï¼‹ã°ã‹ã‚Š éé›£ Aã¯ã‚‚ã¡ã‚ã‚“Bã‚‚ï¼Aã ã‘ã§ãªãã€ã•ã‚‰ã«Bã‚‚ Aã°ã‹ã‚Šã§ãªãBã‚‚ï¼Aã°ã‹ã‚Šã‹B æ¥ç»­ graph LR; N+åŠ©è© --&gt; ã•ãˆ; V-ã¦--&gt;ã•ãˆ; ãªã„ã§/ã›ãšã«/ãªãã¦/ã›ãš ã®ã¯ ã“ã¨ã¯ é•ã„ ã˜ã‚ƒãªã„ ã˜ã‚ƒãªã„ã‹ å£èª ã¨ã„ã†ã¨/ã°/ãŸã‚‰ ãã®è¨€è‘‰ã‹ã‚‰å¤šãã®ã²ã¨ãŒã„ã‚ãƒ¼ã˜ã™ã‚‹ã‚‚ã®ã”ã¨ã‚’è¨€ã†ã¨ãã«ä½¿ã† V-ã‚‹ï¼‹ã¹ãï¼‹ã /N ï½ã™ã‚‹ã¹ãï¼ï½ã™ã¹ã ï½ã™ã‚‹ã¹ãã§ã¯ãªã„ï¼ãã‚“ãªäº‹ã‚’ã—ã¦ã¯ã„ã‘ãªã„ ï½ã¹ãã£ã ã£ãŸï¼ï½ã—ãŸã»ã†ãŒè‰¯ã„ã®ã«ã—ãªã‹ã£ãŸã“ã¨ã‚’å¾Œæ‚”ã—ã¦ã„ã‚‹ ã«ã¨ã£ã¦ ã‚ã‚‹å¯¾è±¡ã«å¯¾ã™ã‚‹æ…‹åº¦ã‚’è¡¨ã™è¨€è‘‰ã¯ä½¿ãˆãªã„ ãŸã³ã«ã€ã”ã¨ã«ã€ãŠãã«ã€ãšã¤ é•ã„ ã§/ã« ä¸å¯§ ã‚ˆã†ãªã‚‰/ã ã£ãŸã‚‰/ã‚ˆã†ã§ã—ãŸã‚‰ï¼ãªã‚‰/ãŸã‚‰ã®ä¸å¯§å½¢ ãªã‚“ã‹/ãªã‚“ã¦ï¼ãªã© ã™ãƒ¼ã·ã«ã™ã‚‹ãªã‚‰ã€ã“ã®è‚‰ãªã‚“ã‹ã„ã„ã¨æ€ã„ã¾ã™ã‚ˆ ã‹ã¨æ€ã†ï¼æ€ã† ã¦ãã‚‹ ä»Šã¾ã§ãªã‹ã£ãŸã‚‚ã®ãŒã‚ã‚‰ã‚ã‚ŒãŸã‚Šã€ä½•ã‹ãŒå§‹ã¾ã£ãŸã‚Šã—ãŸã¨ãã«ä½¿ã† æœã‹ã‚‰é™ã£ã¦ã„ãŸé›¨ãŒã‚„ã‚“ã§ã€ã¡ã‚‡ã£ã¨æ™´ã‚Œã¦ããŸ ã¦ãã‚‹/ã¦ã„ã ã¡ãŒã„ ã‚‚ã®ã ã‹ã‚‰ãƒ»ã‚‚ã®ã§ã™ã‹ã‚‰ãƒ»ã‚‚ã®ã§ ã€Œã ã‹ã‚‰ä»•æ–¹ãªã„ã®ã ã€ã¨ã„ã†ã‚ˆã†ãªã€Œè¨€ã„è¨³ã€ã€Œå¼è§£ãƒ»å¼æ˜ã€ãŒå«ã¾ã‚Œã‚‹ äºˆå®šå¤–ã®ã“ã¨ã‚„ä¸æœ¬æ„ãªç†ç”±ãŒã‚ã£ãŸã®ã§ã€œã  å‰ä»¶ã®ç¨‹åº¦ãŒã²ã©ã„ã®ã§å¾Œä»¶ã®çŠ¶æ…‹ã«ãªã£ãŸã“ã¨ã‚’è¿°ã¹ã‚‹ã¨ãã«ç”¨ã„ã‚‹ã®ãŒç‰¹å¾´ã§ã™ å› ä¸ºåŸå› Aè€Œä¸å¾—ä¸å‘ç”Ÿäº†Bï¼ˆä¸å¥½çš„äº‹ï¼‰ï¼Œå±äºä¸å¯æŠ—åŠ› ä¸ºè‡ªå·±è¾©è§£ ã§ã™ã‹ã‚‰ å•çº¯çš„åŸå›  ã‚“ã§ã™ ã‚“ã ã‚‚ã®ãƒ»ã ã‚‚ã‚“ãƒ»ã§ã™ã‚‚ã®(ä¸å¯§) å¥³æ€§ç”¨å¾—å¤š æ¯æ—¥ã®ã‚“ã³ã‚Šæ—¥æœ¬èªæ•™å¸« ã€N2æ–‡æ³•ã€‘ã€œã‚‚ã®ã ã‹ã‚‰ãƒ»ã‚‚ã®ã§ãƒ»ã‚“ã ã‚‚ã®ã€è¨€ã„è¨³ãƒ»ç†ç”±ã€‘ çµµã§ã‚ã‹ã‚‹æ—¥æœ¬èª ã€Œã‚‚ã®ã§ã™ã‹ã‚‰ã€ã€Œã‚“ã§ã™ã€ã€Œã§ã™ã‹ã‚‰ã€ã®é•ã„ã«ã¤ã„ã¦ ã†ã¡ã«/ã†ã¡ã§/ã†ã¡ã«ã¯ è¯·æ±‚æŸäººåšæŸäº‹ï¼šã¦ãã ã•ã„ãƒ»ã¦ã‚‚ã‚‰ã¦ã„ã„ã§ã™ã‹ãƒ»ã¦ã„ãŸã ããŸã„ã‚“ã§ã™ãŒ ï½ã¦ã‹ã‚‰ã§ãªã‘ã‚Œã°â€¦ï¼ï½ã¦ã‹ã‚‰å‡ºãªã„ã¨â€¦ ~ä¸å®ç°çš„è¯ï¼ˆä¸å…ˆåšæŸäº‹çš„è¯ï¼‰ï¼Œ...å°±å®ç°ä¸äº† ã—ã¦ã‹ã‚‰ã®å¦å®šå½¢ å‘ã‘-å¯¾è±¡ã®ã€ãŸã‚ã® å‘ã-é©ã—ãŸã€ãµã•ã‚ã—ã„ ã‘ã‚Œã© ã ã‘ã© ãŒ V-ã¦ã„ã‚‹/Nã®ï¼‹æœ€ä¸­ã«ï¼æœ€ä¸­ã  ä½•ã‹ã‚’ã—ã¦ã„ã‚‹ã€ã¡ã‚‡ã†ã©ãã®ã¨ãã«ã€æ€ã£ã¦ã„ãªã‹ã£ãŸã“ã¨ãŒèµ·ããŸã¨ãã«ä½¿ã‚ã‚Œã‚‹ ã‹ã‘ï¼šä½•ã‹ã‚’ã—å§‹ã‚ã¦ã€ã¾ã çµ‚ã‚ã£ã¦ã„ãªã„çŠ¶æ…‹ ãã‚Š ã¯ã˜ã‚ã„ãŸ ãšã«ã¯ã„ã‚‰ã‚Œãªã/ãªã„ã§ã¯ã„ã‚‰ã‚Œãªã æˆ‘æ…¢ãŒã§ããªãã¦ã€ã©ã†ã—ã¦ã‚‚ï½ã—ã¦ã—ã¾ã†çŠ¶æ³ ã‚ã‘ãŒãªã„ å¼ºçƒˆå¦å®š ãªã„ã‚ã‘ãŒãªã„ ä¸€å®šï¼Œéå¸¸è‚¯å®š ãªã‚“ã ã‹ã‚‰ ã ã£ã¦ å¬è¯´ ã‹ã‚‰ã“ãï¼ˆå‰ï¼‰/ã ã‹ã‚‰ã“ãï¼ˆå¾Œã‚ï¼‰ å¼ºè°ƒåŸå› ï¼ˆå¤§åˆ‡ãªç†ç”±ã€ç‰¹åˆ¥ãªç†ç”±ï¼‰ ã£ã¦ã“ãªã„=ã‚ã‘ãŒãªã„ï¼ˆæ¥ç»­ä¸ä¸€æ ·ï¼‰ ãªã„ é•ã„ ã‹ã‚‰ã¨è¨€ã£ã¦ã€ï¼ˆãªã„ï¼‰ åªå‡­â€¦â€¦ä¸ºç†ç”±æ˜¯ä¸è¡Œçš„ Nï¼‹ã£ã½ã„ å°è±¡ ãã†è¦‹ãˆã‚‹ ãã†æ„Ÿã˜ Vï¼‹ã£ã½ã„ ã‚ˆãã™ã‚‹ ã™ãã«ã™ã‚‹ ç»å¸¸ åŠ¨ä¸åŠ¨ ã‚ãã‚‹ ãŠã“ã‚‹ graph LR; V-ã¾ã™--&gt;æ°—å‘³; N--&gt;æ°—å‘³; â€‹ ä»Šã®çŠ¶æ…‹ã¯å°‘ã—ï½ã®æ„Ÿã˜ãŒã™ã‚‹ ã“ã¨ã¨ã„ã£ãŸã‚‰ ãã›ã« ã®ã« Nï¼‹ã®ã“ãŸã ã‹ã‚‰ ãªã‚“ã‹ ã„ãªã„ï¼ã¦ã„ãªã„ å¼·èª¿ å¯èƒ½æ€§ã‚’ä½¿ã†ã“ã¨ã‚‚ãŠãŠã„ ã„ãªã„ ã„ã‚‰ã‚Œãªã„ é•ã„ ã•ãˆ å¼ºè°ƒï¼ˆæç«¯ä¾‹å­ï¼‰ graph LR A[N+åŠ©è©]--&gt;B[ã•ãˆ] C[Vãƒ¼ã¦]--&gt;B åŠ©è¯ã‚’ã€ã¯ã€ãŒçœç•¥ ã£ã±ãªã— Vã¾ã™ï¼‹ã£ã±ãªã— ãŸã¾ã¾çš„è´Ÿé¢ç‰ˆ ï¼®ï¼‘æ–‡æ³•ï½ã£ã±ãªã— ã€œã£ã±ãªã—ï½œæ—¥æœ¬èªèƒ½åŠ›è©¦é¨“ JLPT Nï¼’ N3æ–‡æ³•44ã€Œã£ã±ãªã—ã€æ”¾ç½®ä¸ç®¡ ã ã‚‰ã‘/ã¾ã¿ã‚Œ/ãšãã‚ ãŸã‚Šã—ã¦ â‘  æ™®æ®µã¨é•ã†ç›¸æ‰‹ã®æ§˜å­ã‚’æŸ”ã‚‰ã‹ãè¨€ã† â‘¡ æŒ‡ç¤ºã‚’æŸ”ã‚‰ã‹ãä¼ãˆã‚‹ ","link":"https://yuchuanghui.github.io/post/try-xi-lie-yu-fa/"},{"title":"Linuxå¤‡å¿˜","content":"Linuxå¤‡å¿˜ é˜²ç«å¢™æ“ä½œ å¼€å¯ç«¯å£ firewall-cmd --zone=public --addport=80/tcp --permanent é‡è½½ç«¯å£ firewall-cmd --reload æŸ¥çœ‹æ‰€æœ‰ç«¯å£ firewall-cmd --zone=public --list-ports ","link":"https://yuchuanghui.github.io/post/linux-bei-wang/"},{"title":"shadowsocksä¸€é”®æ­å»º","content":" Centosä¸‹ä¸€é”®å®‰è£…shadowsocksæœåŠ¡ å‚è€ƒï¼šä¸€é”®è„šæœ¬æ­å»ºSS/æ­å»ºSSRæœåŠ¡å¹¶å¼€å¯BBRåŠ é€Ÿ å®‰è£…gitæœåŠ¡ yum -y install git è·å–ä¸€é”®å®‰è£…è„šæœ¬ git clone -b master https://github.com/flyzy2005/ss-fly è¿è¡Œä»£ç  ss-fly/ss-fly.sh -i psw 1024 ç›¸å…³æ“ä½œ ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼švim /etc/shadowsocks.json åœæ­¢ssæœåŠ¡ï¼šssserver -c /etc/shadowsocks.json -d stop å¯åŠ¨ssæœåŠ¡ï¼šssserver -c /etc/shadowsocks.json -d start é‡å¯ssæœåŠ¡ï¼šssserver -c /etc/shadowsocks.json -d restart å¸è½½ ss-fly/ss-fly.sh -uninstall å¼€å¯bbr ss-fly/ss-fly.sh -bbr sysctl net.ipv4.tcp_available_congestion_control # bbrå¼€å¯æ£€æµ‹ # TODO: SSRæ­å»º # TODO: å…·ä½“ä»£ç çš„åˆ†æ æ‰§è¡Œè„šæœ¬çš„æºç ï¼š #! /bin/bash # Copyright (c) 2018 flyzyå°ç«™ red='\\033[0;31m' green='\\033[0;32m' yellow='\\033[0;33m' plain='\\033[0m' os='ossystem' password='flyzy2005.com' port='1024' libsodium_file=&quot;libsodium-1.0.16&quot; libsodium_url=&quot;https://github.com/jedisct1/libsodium/releases/download/1.0.16/libsodium-1.0.16.tar.gz&quot; fly_dir=&quot;$( cd &quot;$( dirname &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&amp; pwd )&quot; kernel_ubuntu_url=&quot;http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.10.2/linux-image-4.10.2-041002-generic_4.10.2-041002.201703120131_amd64.deb&quot; kernel_ubuntu_file=&quot;linux-image-4.10.2-041002-generic_4.10.2-041002.201703120131_amd64.deb&quot; usage () { cat $fly_dir/sshelp } DIR=`pwd` wrong_para_prompt() { echo -e &quot;[${red}é”™è¯¯${plain}] å‚æ•°è¾“å…¥é”™è¯¯!$1&quot; } install_ss() { if [[ &quot;$#&quot; -lt 1 ]] then wrong_para_prompt &quot;è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªå‚æ•°ä½œä¸ºå¯†ç &quot; return 1 fi password=$1 if [[ &quot;$#&quot; -ge 2 ]] then port=$2 fi if [[ $port -le 0 || $port -gt 65535 ]] then wrong_para_prompt &quot;ç«¯å£å·è¾“å…¥æ ¼å¼é”™è¯¯ï¼Œè¯·è¾“å…¥1åˆ°65535&quot; exit 1 fi check_os check_dependency download_files ps -ef | grep -v grep | grep -i &quot;ssserver&quot; &gt; /dev/null 2&gt;&amp;1 if [ $? -eq 0 ]; then ssserver -c /etc/shadowsocks.json -d stop fi generate_config $password $port if [ ${os} == 'centos' ] then firewall_set fi install cleanup } uninstall_ss() { read -p &quot;ç¡®å®šè¦å¸è½½sså—ï¼Ÿ(y/n) :&quot; option [ -z ${option} ] &amp;&amp; option=&quot;n&quot; if [ &quot;${option}&quot; == &quot;y&quot; ] || [ &quot;${option}&quot; == &quot;Y&quot; ] then ps -ef | grep -v grep | grep -i &quot;ssserver&quot; &gt; /dev/null 2&gt;&amp;1 if [ $? -eq 0 ]; then ssserver -c /etc/shadowsocks.json -d stop fi case $os in 'ubuntu'|'debian') update-rc.d -f ss-fly remove ;; 'centos') chkconfig --del ss-fly ;; esac rm -f /etc/shadowsocks.json rm -f /var/run/shadowsocks.pid rm -f /var/log/shadowsocks.log if [ -f /usr/local/shadowsocks_install.log ]; then cat /usr/local/shadowsocks_install.log | xargs rm -rf fi echo &quot;sså¸è½½æˆåŠŸï¼&quot; else echo echo &quot;å¸è½½å–æ¶ˆ&quot; fi } install_bbr() { [[ -d &quot;/proc/vz&quot; ]] &amp;&amp; echo -e &quot;[${red}é”™è¯¯${plain}] ä½ çš„ç³»ç»Ÿæ˜¯OpenVZæ¶æ„çš„ï¼Œä¸æ”¯æŒå¼€å¯BBRã€‚&quot; &amp;&amp; exit 1 check_os check_bbr_status if [ $? -eq 0 ] then echo -e &quot;[${green}æç¤º${plain}] TCP BBRåŠ é€Ÿå·²ç»å¼€å¯æˆåŠŸã€‚&quot; exit 0 fi check_kernel_version if [ $? -eq 0 ] then echo -e &quot;[${green}æç¤º${plain}] ä½ çš„ç³»ç»Ÿç‰ˆæœ¬é«˜äº4.9ï¼Œç›´æ¥å¼€å¯BBRåŠ é€Ÿã€‚&quot; sysctl_config echo -e &quot;[${green}æç¤º${plain}] TCP BBRåŠ é€Ÿå¼€å¯æˆåŠŸ&quot; exit 0 fi if [[ x&quot;${os}&quot; == x&quot;centos&quot; ]]; then install_elrepo yum --enablerepo=elrepo-kernel -y install kernel-ml kernel-ml-devel if [ $? -ne 0 ]; then echo -e &quot;[${red}é”™è¯¯${plain}] å®‰è£…å†…æ ¸å¤±è´¥ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ã€‚&quot; exit 1 fi elif [[ x&quot;${os}&quot; == x&quot;debian&quot; || x&quot;${os}&quot; == x&quot;ubuntu&quot; ]]; then [[ ! -e &quot;/usr/bin/wget&quot; ]] &amp;&amp; apt-get -y update &amp;&amp; apt-get -y install wget #get_latest_version #[ $? -ne 0 ] &amp;&amp; echo -e &quot;[${red}é”™è¯¯${plain}] è·å–æœ€æ–°å†…æ ¸ç‰ˆæœ¬å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ&quot; &amp;&amp; exit 1 #wget -c -t3 -T60 -O ${deb_kernel_name} ${deb_kernel_url} #if [ $? -ne 0 ]; then # echo -e &quot;[${red}é”™è¯¯${plain}] ä¸‹è½½${deb_kernel_name}å¤±è´¥ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ã€‚&quot; # exit 1 #fi #dpkg -i ${deb_kernel_name} #rm -fv ${deb_kernel_name} wget ${kernel_ubuntu_url} if [ $? -ne 0 ] then echo -e &quot;[${red}é”™è¯¯${plain}] ä¸‹è½½å†…æ ¸å¤±è´¥ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ã€‚&quot; exit 1 fi dpkg -i ${kernel_ubuntu_file} else echo -e &quot;[${red}é”™è¯¯${plain}] è„šæœ¬ä¸æ”¯æŒè¯¥æ“ä½œç³»ç»Ÿï¼Œè¯·ä¿®æ”¹ç³»ç»Ÿä¸ºCentOS/Debian/Ubuntuã€‚&quot; exit 1 fi install_config sysctl_config reboot_os } install_ssr() { check_os case $os in 'ubuntu'|'debian') apt-get -y update apt-get -y install wget ;; 'centos') yum install -y wget ;; esac wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh chmod +x shadowsocksR.sh ./shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log } check_os_() { source /etc/os-release local os_tmp=$(echo $ID | tr [A-Z] [a-z]) case $os_tmp in ubuntu|debian) os='ubuntu' ;; centos) os='centos' ;; *) echo -e &quot;[${red}é”™è¯¯${plain}] æœ¬è„šæœ¬æš‚æ—¶åªæ”¯æŒCentos/Ubuntu/Debianç³»ç»Ÿï¼Œå¦‚éœ€ç”¨æœ¬è„šæœ¬ï¼Œè¯·å…ˆä¿®æ”¹ä½ çš„ç³»ç»Ÿç±»å‹&quot; exit 1 ;; esac } check_os() { if [[ -f /etc/redhat-release ]]; then os=&quot;centos&quot; elif cat /etc/issue | grep -Eqi &quot;debian&quot;; then os=&quot;debian&quot; elif cat /etc/issue | grep -Eqi &quot;ubuntu&quot;; then os=&quot;ubuntu&quot; elif cat /etc/issue | grep -Eqi &quot;centos|red hat|redhat&quot;; then os=&quot;centos&quot; elif cat /proc/version | grep -Eqi &quot;debian&quot;; then os=&quot;debian&quot; elif cat /proc/version | grep -Eqi &quot;ubuntu&quot;; then os=&quot;ubuntu&quot; elif cat /proc/version | grep -Eqi &quot;centos|red hat|redhat&quot;; then os=&quot;centos&quot; fi } check_bbr_status() { local param=$(sysctl net.ipv4.tcp_available_congestion_control | awk '{print $3}') if [[ x&quot;${param}&quot; == x&quot;bbr&quot; ]]; then return 0 else return 1 fi } version_ge(){ test &quot;$(echo &quot;$@&quot; | tr &quot; &quot; &quot;\\n&quot; | sort -rV | head -n 1)&quot; == &quot;$1&quot; } check_kernel_version() { local kernel_version=$(uname -r | cut -d- -f1) if version_ge ${kernel_version} 4.9; then return 0 else return 1 fi } sysctl_config() { sed -i '/net.core.default_qdisc/d' /etc/sysctl.conf sed -i '/net.ipv4.tcp_congestion_control/d' /etc/sysctl.conf echo &quot;net.core.default_qdisc = fq&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv4.tcp_congestion_control = bbr&quot; &gt;&gt; /etc/sysctl.conf sysctl -p &gt;/dev/null 2&gt;&amp;1 } install_elrepo() { if centosversion 5; then echo -e &quot;[${red}é”™è¯¯${plain}] è„šæœ¬ä¸æ”¯æŒCentOS 5ã€‚&quot; exit 1 fi rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org if centosversion 6; then rpm -Uvh http://www.elrepo.org/elrepo-release-6-8.el6.elrepo.noarch.rpm elif centosversion 7; then rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm fi if [ ! -f /etc/yum.repos.d/elrepo.repo ]; then echo -e &quot;[${red}é”™è¯¯${plain}] å®‰è£…elrepoå¤±è´¥ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ã€‚&quot; exit 1 fi } get_latest_version() { latest_version=$(wget -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/ | awk -F'\\&quot;v' '/v[4-9]./{print $2}' | cut -d/ -f1 | grep -v - | sort -V | tail -1) [ -z ${latest_version} ] &amp;&amp; return 1 if [[ `getconf WORD_BIT` == &quot;32&quot; &amp;&amp; `getconf LONG_BIT` == &quot;64&quot; ]]; then deb_name=$(wget -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v${latest_version}/ | grep &quot;linux-image&quot; | grep &quot;generic&quot; | awk -F'\\&quot;&gt;' '/amd64.deb/{print $2}' | cut -d'&lt;' -f1 | head -1) deb_kernel_url=&quot;http://kernel.ubuntu.com/~kernel-ppa/mainline/v${latest_version}/${deb_name}&quot; deb_kernel_name=&quot;linux-image-${latest_version}-amd64.deb&quot; else deb_name=$(wget -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v${latest_version}/ | grep &quot;linux-image&quot; | grep &quot;generic&quot; | awk -F'\\&quot;&gt;' '/i386.deb/{print $2}' | cut -d'&lt;' -f1 | head -1) deb_kernel_url=&quot;http://kernel.ubuntu.com/~kernel-ppa/mainline/v${latest_version}/${deb_name}&quot; deb_kernel_name=&quot;linux-image-${latest_version}-i386.deb&quot; fi [ ! -z ${deb_name} ] &amp;&amp; return 0 || return 1 } get_opsy() { [ -f /etc/redhat-release ] &amp;&amp; awk '{print ($1,$3~/^[0-9]/?$3:$4)}' /etc/redhat-release &amp;&amp; return [ -f /etc/os-release ] &amp;&amp; awk -F'[= &quot;]' '/PRETTY_NAME/{print $3,$4,$5}' /etc/os-release &amp;&amp; return [ -f /etc/lsb-release ] &amp;&amp; awk -F'[=&quot;]+' '/DESCRIPTION/{print $2}' /etc/lsb-release &amp;&amp; return } opsy=$( get_opsy ) arch=$( uname -m ) lbit=$( getconf LONG_BIT ) kern=$( uname -r ) check_dependency() { case $os in 'ubuntu'|'debian') apt-get -y update apt-get -y install python python-dev python-setuptools openssl libssl-dev curl wget unzip gcc automake autoconf make libtool ;; 'centos') yum install -y python python-devel python-setuptools openssl openssl-devel curl wget unzip gcc automake autoconf make libtool esac } install_config() { if [[ x&quot;${os}&quot; == x&quot;centos&quot; ]]; then if centosversion 6; then if [ ! -f &quot;/boot/grub/grub.conf&quot; ]; then echo -e &quot;[${red}é”™è¯¯${plain}] æ²¡æœ‰æ‰¾åˆ°/boot/grub/grub.confæ–‡ä»¶ã€‚&quot; exit 1 fi sed -i 's/^default=.*/default=0/g' /boot/grub/grub.conf elif centosversion 7; then if [ ! -f &quot;/boot/grub2/grub.cfg&quot; ]; then echo -e &quot;[${red}é”™è¯¯${plain}] æ²¡æœ‰æ‰¾åˆ°/boot/grub2/grub.cfgæ–‡ä»¶ã€‚&quot; exit 1 fi grub2-set-default 0 fi elif [[ x&quot;${os}&quot; == x&quot;debian&quot; || x&quot;${os}&quot; == x&quot;ubuntu&quot; ]]; then /usr/sbin/update-grub fi } reboot_os() { echo echo -e &quot;[${green}æç¤º${plain}] ç³»ç»Ÿéœ€è¦é‡å¯BBRæ‰èƒ½ç”Ÿæ•ˆã€‚&quot; read -p &quot;æ˜¯å¦ç«‹é©¬é‡å¯ [y/n]&quot; is_reboot if [[ ${is_reboot} == &quot;y&quot; || ${is_reboot} == &quot;Y&quot; ]]; then reboot else echo -e &quot;[${green}æç¤º${plain}] å–æ¶ˆé‡å¯ã€‚å…¶è‡ªè¡Œæ‰§è¡Œrebootå‘½ä»¤ã€‚&quot; exit 0 fi } download_files() { if ! wget --no-check-certificate -O ${libsodium_file}.tar.gz ${libsodium_url} then echo -e &quot;[${red}é”™è¯¯${plain}] ä¸‹è½½${libsodium_file}.tar.gzå¤±è´¥!&quot; exit 1 fi if ! wget --no-check-certificate -O shadowsocks-master.zip https://github.com/shadowsocks/shadowsocks/archive/master.zip then echo -e &quot;[${red}é”™è¯¯${plain}] shadowsockså®‰è£…åŒ…æ–‡ä»¶ä¸‹è½½å¤±è´¥ï¼&quot; exit 1 fi } generate_config() { cat &gt; /etc/shadowsocks.json&lt;&lt;-EOF { &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:$2, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;$1&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;fast_open&quot;:false } EOF } firewall_set(){ echo -e &quot;[${green}ä¿¡æ¯${plain}] æ­£åœ¨è®¾ç½®é˜²ç«å¢™...&quot; if centosversion 6; then /etc/init.d/iptables status &gt; /dev/null 2&gt;&amp;1 if [ $? -eq 0 ]; then iptables -L -n | grep -i ${port} &gt; /dev/null 2&gt;&amp;1 if [ $? -ne 0 ]; then iptables -I INPUT -m state --state NEW -m tcp -p tcp --dport ${port} -j ACCEPT iptables -I INPUT -m state --state NEW -m udp -p udp --dport ${port} -j ACCEPT /etc/init.d/iptables save /etc/init.d/iptables restart else echo -e &quot;[${green}ä¿¡æ¯${plain}] port ${port}å·²ç»å¼€æ”¾ã€‚&quot; fi else echo -e &quot;[${yellow}è­¦å‘Š${plain}] é˜²ç«å¢™ï¼ˆiptablesï¼‰å¥½åƒå·²ç»åœæ­¢æˆ–æ²¡æœ‰å®‰è£…ï¼Œå¦‚æœ‰éœ€è¦è¯·æ‰‹åŠ¨å…³é—­é˜²ç«å¢™ã€‚&quot; fi elif centosversion 7; then systemctl status firewalld &gt; /dev/null 2&gt;&amp;1 if [ $? -eq 0 ]; then firewall-cmd --permanent --zone=public --add-port=${port}/tcp firewall-cmd --permanent --zone=public --add-port=${port}/udp firewall-cmd --reload else echo -e &quot;[${yellow}è­¦å‘Š${plain}] é˜²ç«å¢™ï¼ˆiptablesï¼‰å¥½åƒå·²ç»åœæ­¢æˆ–æ²¡æœ‰å®‰è£…ï¼Œå¦‚æœ‰éœ€è¦è¯·æ‰‹åŠ¨å…³é—­é˜²ç«å¢™ã€‚&quot; fi fi echo -e &quot;[${green}ä¿¡æ¯${plain}] é˜²ç«å¢™è®¾ç½®æˆåŠŸã€‚&quot; } centosversion(){ if [ ${os} == 'centos' ] then local code=$1 local version=&quot;$(getversion)&quot; local main_ver=${version%%.*} if [ &quot;$main_ver&quot; == &quot;$code&quot; ]; then return 0 else return 1 fi else return 1 fi } getversion(){ if [[ -s /etc/redhat-release ]]; then grep -oE &quot;[0-9.]+&quot; /etc/redhat-release else grep -oE &quot;[0-9.]+&quot; /etc/issue fi } install() { if [ ! -f /usr/lib/libsodium.a ] then cd ${DIR} tar zxf ${libsodium_file}.tar.gz cd ${libsodium_file} ./configure --prefix=/usr &amp;&amp; make &amp;&amp; make install if [ $? -ne 0 ] then echo -e &quot;[${red}é”™è¯¯${plain}] libsodiumå®‰è£…å¤±è´¥!&quot; cleanup exit 1 fi fi ldconfig cd ${DIR} unzip -q shadowsocks-master.zip if [ $? -ne 0 ] then echo -e &quot;[${red}é”™è¯¯${plain}] è§£å‹ç¼©å¤±è´¥ï¼Œè¯·æ£€æŸ¥unzipå‘½ä»¤&quot; cleanup exit 1 fi cd ${DIR}/shadowsocks-master python setup.py install --record /usr/local/shadowsocks_install.log if [ -f /usr/bin/ssserver ] || [ -f /usr/local/bin/ssserver ] then cp $fly_dir/ss-fly /etc/init.d/ chmod +x /etc/init.d/ss-fly case $os in 'ubuntu'|'debian') update-rc.d ss-fly defaults ;; 'centos') chkconfig --add ss-fly chkconfig ss-fly on ;; esac ssserver -c /etc/shadowsocks.json -d start else echo -e &quot;[${red}é”™è¯¯${plain}] ssæœåŠ¡å™¨å®‰è£…å¤±è´¥ï¼Œè¯·è”ç³»flyzyå°ç«™ï¼ˆhttps://www.flyzy2005.comï¼‰&quot; cleanup exit 1 fi echo -e &quot;[${green}æˆåŠŸ${plain}] å®‰è£…æˆåŠŸå°½æƒ…å†²æµªï¼&quot; echo -e &quot;ä½ çš„æœåŠ¡å™¨åœ°å€ï¼ˆIPï¼‰ï¼š\\033[41;37m $(get_ip) \\033[0m&quot; echo -e &quot;ä½ çš„å¯†ç  ï¼š\\033[41;37m ${password} \\033[0m&quot; echo -e &quot;ä½ çš„ç«¯å£ ï¼š\\033[41;37m ${port} \\033[0m&quot; echo -e &quot;ä½ çš„åŠ å¯†æ–¹å¼ ï¼š\\033[41;37m aes-256-cfb \\033[0m&quot; echo -e &quot;æ¬¢è¿è®¿é—®flyzyå°ç«™ ï¼š\\033[41;37m https://www.flyzy2005.com \\033[0m&quot; get_ss_link } cleanup() { cd ${DIR} rm -rf shadowsocks-master.zip shadowsocks-master ${libsodium_file}.tar.gz ${libsodium_file} } get_ip(){ local IP=$( ip addr | egrep -o '[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}' | egrep -v &quot;^192\\.168|^172\\.1[6-9]\\.|^172\\.2[0-9]\\.|^172\\.3[0-2]\\.|^10\\.|^127\\.|^255\\.|^0\\.&quot; | head -n 1 ) [ -z ${IP} ] &amp;&amp; IP=$( wget -qO- -t1 -T2 ipv4.icanhazip.com ) [ -z ${IP} ] &amp;&amp; IP=$( wget -qO- -t1 -T2 ipinfo.io/ip ) [ ! -z ${IP} ] &amp;&amp; echo ${IP} || echo } get_ss_link(){ if [ ! -f &quot;/etc/shadowsocks.json&quot; ]; then echo 'shdowsocksé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼ˆ/etc/shadowsocks.jsonï¼‰' exit 1 fi local tmp=$(echo -n &quot;`get_config_value method`:`get_config_value password`@`get_ip`:`get_config_value server_port`&quot; | base64 -w0) echo -e &quot;ä½ çš„ssé“¾æ¥ï¼š\\033[41;37m ss://${tmp} \\033[0m&quot; } get_config_value(){ cat /etc/shadowsocks.json | grep &quot;\\&quot;$1\\&quot;:&quot;|awk -F &quot;:&quot; '{print $2}'| sed 's/\\&quot;//g;s/,//g;s/ //g' } if [ &quot;$#&quot; -eq 0 ]; then usage exit 0 fi case $1 in -h|h|help ) usage exit 0; ;; -v|v|version ) echo 'ss-fly Version 1.0, 2018-01-20, Copyright (c) 2018 flyzy2005' exit 0; ;; esac if [ &quot;$EUID&quot; -ne 0 ]; then echo -e &quot;[${red}é”™è¯¯${plain}] å¿…éœ€ä»¥rootèº«ä»½è¿è¡Œï¼Œè¯·ä½¿ç”¨sudoå‘½ä»¤&quot; exit 1; fi case $1 in -i|i|install ) install_ss $2 $3 ;; -bbr ) install_bbr ;; -ssr ) install_ssr ;; -uninstall ) uninstall_ss ;; -sslink ) get_ss_link ;; * ) usage ;; esac ","link":"https://yuchuanghui.github.io/post/shadowsocksä¸€é”®æ­å»º/"},{"title":"Centos7ä¸Šå®‰è£…OpenVPN","content":" Centos7ä¸Šå®‰è£…openvpn æœ¬æ–‡å‚è€ƒï¼š åŸºäºopenvpnçš„æ ¡å›­ç½‘ipv6å…æµé‡æ–¹æ¡ˆ |ipv6|æ ¡å›­ç½‘|å…æµé‡ è¿™ç¯‡åšæ–‡åŸºäºcentos6ï¼Œå†…å®¹æœ‰äº›è¿‡æ—¶ï¼Œç›´æ¥æŒ‰ç…§ä»–çš„æ–¹æ³•ç°åœ¨å·²ç»ä¸è¡Œäº†ï¼Œä½†æ˜¯å¯ä»¥ç”¨æ¥å‚è€ƒipv6çš„æ­å»º Centos7ä¸‹æ­å»ºOpenVPNçš„è¿‡ç¨‹è®°å½• è¿™ç¯‡åšæ–‡æ˜¯ä¸»è¦å‚è€ƒ OpenVPN IPv6 and IPv4 configuration å…³äºå¦‚ä½•è®¾ç½®ipv6ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œå®é™…ä¸Šå¥½åƒåªéœ€è¦ä¿®æ”¹proto udp6ï¼Ÿ Centos7ä¸‹OpenVpnæœåŠ¡å™¨æ­å»º å—å±±å±…ï¼ŒåŸºæœ¬ç±»ä¼¼ Cenos7 ä¸‹æ­å»º OpenVPN è¿‡ç¨‹è®°å½• ç®€ä½“ç‰ˆ Using OpenVPN with IPv6 å®Œå…¨ä¸åŒçš„æ–¹æ³•ï¼Œä»…ä¾›æ—¥åå‚è€ƒ å…æµä¸€é”®è„šæœ¬VPNæ­å»º ä¸€é”®è„šæœ¬ï¼Œæ²¡æœ‰è¯•è¿‡ã€‚å®é™…ä¸Šgithubä¸Šåº”è¯¥æœ‰å¾ˆå¤šä¸€é”®è„šæœ¬æ¥ç€ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸€æ—¦ä¸èƒ½æˆåŠŸè¿˜æ˜¯å¾ˆä¼¤ã€‚å¦‚æœä¸€é”®å¤±è´¥ï¼Œè¿˜æ˜¯å°è¯•æ‰‹åŠ¨æ­ä¸€æ­å§ã€‚ æµç¨‹ æœåŠ¡ç«¯ ç³»ç»Ÿï¼š centos7 OpenVPNï¼š 2.4.7 easy-rsaï¼š3.0.3 å®‰è£…openvpnã€ easy-rsaã€iptables-services yum -y install epel-release yum -y install openvpn easy-rsa iptables-services ä½¿ç”¨easy-rsaç”Ÿæˆéœ€è¦çš„è¯ä¹¦å’Œç›¸å…³æ–‡ä»¶ å°†easy-rsaè„šæœ¬å¤åˆ¶åˆ°/etc/openvpn/ï¼Œåé¢çš„æ‰€æœ‰æ“ä½œéƒ½åŸºäºè¿™ä¸ªæ–‡ä»¶å¤¹ cp -r /usr/share/easy-rsa/ /etc/openvpn/ ç°åœ¨åœ¨openvpnæ–‡ä»¶å¤¹ä¸‹é¢æœ‰easy-rsaæ–‡ä»¶å¤¹ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹èƒ½çœ‹åˆ°ä¸åŒçš„ç‰ˆæœ¬ï¼Œé€‰æ‹©æœ€æ–°ç‰ˆæœ¬ã€‚ä¾‹å¦‚3.0.3ï¼Œè¿›å…¥ã€‚ç„¶åç¼–è¾‘å…¶ä¸­çš„varsæ–‡ä»¶ã€‚è¿™ä¸€æ­¥æ˜¯ä¸ºäº†æ–¹ä¾¿åç»­ç”Ÿæˆè¯ä¹¦æ­¥éª¤ï¼Œé¿å…äº†é‡å¤è¾“å…¥ä¿¡æ¯ã€‚å˜é‡å€¼å¡«è‡ªå·±æƒ³å¡«çš„å³å¯ï¼Œæ— ç‰¹æ®Šè¦æ±‚ã€‚ cd etc/openvpn/easy-rsa/&lt;easy-rsa ç‰ˆæœ¬å·&gt;/ nano vars # ç¼–è¾‘æ–‡ä»¶ #ä»¥ä¸‹ä¸ºæ–‡ä»¶å†…å®¹ export KEY_COUNTRY=&quot;***&quot; export KEY_PROVINCE=&quot;***&quot; export KEY_CITY=&quot;***&quot; export KEY_ORG=&quot;***&quot; export KEY_EMAIL=&quot;***&quot; #æ–‡ä»¶ç¼–è¾‘ç»“æŸï¼Œé€€å‡ºï¼Œnanoçš„æ“ä½œè‡ªè¡Œç™¾åº¦å³å¯ source ./vars #ä½¿å˜é‡ç”Ÿæ•ˆ ç”ŸæˆCAæ ¹è¯ä¹¦ï¼Œä»¥ä¸‹æ“ä½œæœªè¯´æ˜å‡åœ¨easy-rsaæ–‡ä»¶å¤¹ä¸‹è¿›è¡Œ ./easyrsa init-pki # åˆå§‹åŒ– ./easyrsa build-ca name # nameè‡ªå·±é€‰å–ï¼Œå¾—åˆ°CA.crt ç”ŸæˆOpenVPNæœåŠ¡å™¨è¯ä¹¦å’Œå¯†ç  ./easyrsa build-server-full server name # nameå°±æ˜¯ä½ æœåŠ¡å™¨è¯ä¹¦çš„åå­—,å¾—åˆ°name.crtã€name.key ç”ŸæˆDiffile-Hellmanç®—æ³•æ‰€éœ€è¦çš„å¯†é’¥æ–‡ä»¶ ./easyrsa gen-dh # å¾—åˆ°dh.pemæ–‡ä»¶ ç”Ÿæˆtls-auth keyï¼Œé˜²æ­¢DoSå’ŒTLSæ”»å‡»ï¼Œå¯é€‰ openvpn --genkey --secret ta.key ä¸ºäº†æ–¹ä¾¿ï¼ŒæŠŠä¸Šè¿°æ–‡ä»¶æ•´ç†åˆ°certsæ–‡ä»¶å¤¹ä¸­ mkdir /etc/openvpn/server/certs &amp;&amp; cd /etc/openvpn/server/certs/ cp /etc/openvpn/easy-rsa/3.03/pki/dh.pem ./ # SSL å”å•†æ™‚ Diffie-Hellman ç®—æ³•éœ€è¦çš„ key cp /etc/openvpn/easy-rsa/3.03/pki/ca.crt ./ # CA æ ¹è­‰æ›¸ cp /etc/openvpn/easy-rsa/3.03/pki/issued/name.crt ./ # open VPN æœå‹™å™¨è­‰æ›¸ï¼Œæ³¨æ„æ­¤å¤„nameä¸ºå‰é¢è‡ªå·±é€‰æ‹©çš„åå­—ï¼Œä¸‹åŒ cp /etc/openvpn/easy-rsa/3.03/pki/private/name.key ./ # open VPN æœå‹™å™¨è­‰æ›¸ key cp /etc/openvpn/easy-rsa/3.03/ta.key ./ # tls-auth key åˆ›å»ºOpenVPNæ—¥å¿—ç›®å½• mkdir -p /var/log/openvpn/ chown openvpn:openvpn /var/log/openvpn è‡³æ­¤ï¼Œæ‰€æœ‰è¯ä¹¦å¯†é’¥ç›¸å…³æ–‡ä»¶åˆ›å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å°†é…ç½®æ–‡ä»¶å†™å¥½å°±å¯ä»¥äº† é…ç½®OpenVPN æ¨¡æ¿æ–‡ä»¶ä½äº/usr/share/doc/openvpn-&lt;open VPNç‰ˆæœ¬å·&gt;/sample/sample-config-filesä¸­ï¼Œåç¼€ä¸º.confï¼Œä¸è¿‡å‚è€ƒè¿™ä¸ªæ•™ç¨‹çš„äººåº”è¯¥éƒ½ä¼šé€‰æ‹©ç›´æ¥ç”¨é…ç½®å¥½çš„ï¼š æ–°å»ºé…ç½® cd /etc/openvpn/o nano server.conf å¡«å…¥ä»¥ä¸‹å†…å®¹ port 1194 # ç›‘å¬çš„ç«¯å£å·,å¯é€‰ proto udp6 # æœåŠ¡ç«¯ç”¨çš„åè®®ï¼Œudp èƒ½å¿«ç‚¹ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹© udpï¼Œudp6ä»£è¡¨ipv6é€šä¿¡ dev tun ca /etc/openvpn/server/certs/ca.crt # CA æ ¹è¯ä¹¦è·¯å¾„ cert /etc/openvpn/server/certs/name.crt # open VPN æœåŠ¡å™¨è¯ä¹¦è·¯å¾„ key /etc/openvpn/server/certs/name.key # open VPN æœåŠ¡å™¨å¯†é’¥è·¯å¾„ï¼ŒThis file should be kept secret dh /etc/openvpn/server/certs/dh.pem # Diffie-Hellman ç®—æ³•å¯†é’¥æ–‡ä»¶è·¯å¾„ tls-auth /etc/openvpn/server/certs/ta.key 0 # tls-auth keyï¼Œå‚æ•° 0 å¯ä»¥çœç•¥ï¼Œå¦‚æœä¸çœç•¥ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ # é…ç½®ç›¸åº”çš„å‚æ•°è¯¥é…æˆ 1ã€‚å¦‚æœçœç•¥ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¸éœ€è¦ tls-auth é…ç½® server 10.8.0.0 255.255.255.0 # è¯¥ç½‘æ®µçˆ² open VPN è™šæ‹Ÿç½‘å¡ç½‘æ®µï¼Œä¸è¦å’Œå†…ç½‘ç½‘æ®µè¡çªå³å¯ã€‚open VPN é»˜è®¤çˆ² 10.8.0.0/24 push &quot;dhcp-option DNS 8.8.8.8&quot; # DNS æœåŠ¡å™¨é…ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æŒ‡å®šå…¶ä»– ns push &quot;dhcp-option DNS 8.8.4.4&quot; push &quot;redirect-gateway def1&quot; # å®¢æˆ·ç«¯æ‰€æœ‰æµé‡éƒ½é€šè¿‡ open VPN è½¬å‘ï¼Œç±»ä¼¼äºä»£ç†å¼€å…¨å±€ compress lzo duplicate-cn # å…è®¸ä¸€ä¸ªç”¨æˆ·å¤šä¸ªç»ˆç«¯è¿æ¥ keepalive 10 120 comp-lzo persist-key persist-tun user openvpn # open VPN è¿›ç¨‹å¯åŠ¨ç”¨æˆ·ï¼Œopenvpn ç”¨æˆ·åœ¨å®‰è£…å®Œ openvpn åå°±è‡ªåŠ¨ç”Ÿæˆäº† group openvpn log /var/log/openvpn/server.log # æŒ‡å®š log æ–‡ä»¶ä½ç½® log-append /var/log/openvpn/server.log status /var/log/openvpn/status.log verb 3 explicit-exit-notify 1 é…ç½®é˜²ç«å¢™ è¿™å‡ æ­¥æˆ‘ä¹Ÿä¸æ‡‚ï¼Œçœ‹ç€æ“ä½œå°±è¡Œ ç¦ç”¨firewalldï¼Œä½¿ç”¨iptablesé˜²ç«å¢™ç®¡ç†è½¯ä»¶ systemctl stop firewalld systemctl mask firewalld ç¦ç”¨ SELinux é©¬ä¸Šå…³é—­ï¼šsetenforce 0 | é©¬ä¸Šç”Ÿæ•ˆ æ°¸ä¹…å…³é—­ï¼šsed -i â€˜s/SELINUX=enforcing/SELINUX=disabled/gâ€™ /etc/selinux/config | éœ€è¦é‡å¯æœåŠ¡å™¨ç”Ÿæ•ˆ å¯ç”¨iptables systemctl enable iptables systemctl start iptables iptables -F # æ¸…ç†æ‰€æœ‰é˜²ç«å¢™è§„åˆ™ æ·»åŠ é˜²ç«å¢™è§„åˆ™ï¼Œå°† openvpn çš„ç½‘ç»œæµé‡è½¬å‘åˆ°å…¬ç½‘ï¼šsnat è§„åˆ™ (é‡è¦) iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -j MASQUERADE iptables-save &gt; /etc/sysconfig/iptables # iptables è§„åˆ™æŒä¹…åŒ–ä¿å­˜ Linux æœåŠ¡å™¨å¯ç”¨åœ°å€è½¬å‘ echo net.ipv4.ip_forward = 1 &gt;&gt; /etc/sysctl.conf sysctl -p # è¿™ä¸€æ­¥ä¸€å®šå¾—æ‰§è¡Œï¼Œå¦åˆ™ä¸ä¼šç«‹å³ç”Ÿæ•ˆã€‚ å¯åŠ¨OpenVPN systemctl start openvpn@server # å¯åŠ¨ systemctl enable openvpn@server # å¼€æœºè‡ªå¯åŠ¨ systemctl status openvpn@server # æŸ¥çœ‹æœåŠ¡çŠ¶æ€ ç°åœ¨æœåŠ¡ç«¯é…ç½®å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥åªéœ€è¦åˆ›å»ºç”¨æˆ·ï¼Œå’Œå®¢æˆ·ç«¯è”ç³»èµ·æ¥å°±å¯ä»¥ä½¿ç”¨äº† ç”¨æˆ·åˆ›å»ºä¸å®¢æˆ·ç«¯ é¦–å…ˆä¿è¯å®¢æˆ·ç«¯å®‰è£…äº†æœ€æ–°çš„OpenVPNè½¯ä»¶ï¼Œæˆ–è€…å…¶ä»–å¯ç”¨è½¯ä»¶ã€‚ æ¥ä¸‹æ¥åœ¨æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ª open VPN ç”¨æˆ·ï¼š é¦–å…ˆåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯é…ç½®æ¨¡æ¿æ–‡ä»¶ sample.ovpnï¼Œè¯¥æ–‡ä»¶åœ¨è„šæœ¬ä¸­ä¼šç”¨åˆ°ï¼Œæ”¾åˆ° /etc/openvpn/client/ ç›®å½•ï¼Œå†…å®¹å¦‚ä¸‹ï¼š sample.ovpn: client proto udp6 dev tun remote [open VPNæœåŠ¡ç«¯å…¬ç½‘ ipï¼Œæ ¹æ®å®é™…æƒ…å†µå¡«å†™] 1194 ca ca.crt cert admin.crt key admin.key tls-auth ta.key 1 remote-cert-tls server persist-tun persist-key comp-lzo verb 3 mute-replay-warnings å…¶å®åˆ›å»ºç”¨æˆ·çš„è¿‡ç¨‹å°±æ˜¯ç”Ÿæˆå®¢æˆ·ç«¯ SSL è¯ä¹¦çš„è¿‡ç¨‹ï¼Œç„¶åå°†å…¶ä»–ç›¸å…³çš„è¯ä¹¦æ–‡ä»¶ã€keyã€.ovpn æ–‡ä»¶ï¼ˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼‰æ‰“åŒ…åˆ°ä¸€èµ·ä¾›å®¢æˆ·ç«¯ä½¿ç”¨ã€‚ç”±äºåˆ›å»ºä¸€ä¸ªç”¨æˆ·çš„è¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥åœ¨æ­¤å°†æ•´ä¸ªè¿‡ç¨‹å†™æˆäº†ä¸€ä¸ªè„šæœ¬ ovpn_user.shï¼Œè„šæœ¬å†…å®¹æ¯”è¾ƒç®€å•ï¼Œä¸€çœ‹å°±æ‡‚ï¼š # ! /bin/bash set -e OVPN_USER_KEYS_DIR=/etc/openvpn/client/keys EASY_RSA_VERSION=3 EASY_RSA_DIR=/etc/openvpn/easy-rsa/ PKI_DIR=$EASY_RSA_DIR/$EASY_RSA_VERSION/pki for user in &quot;$@&quot; do if [ -d &quot;$OVPN_USER_KEYS_DIR/$user&quot; ]; then rm -rf $OVPN_USER_KEYS_DIR/$user rm -rf $PKI_DIR/reqs/$user.req sed -i '/'&quot;$user&quot;'/d' $PKI_DIR/index.txt fi cd $EASY_RSA_DIR/$EASY_RSA_VERSION # ç”Ÿæˆå®¢æˆ·ç«¯ ssl è¯ä¹¦æ–‡ä»¶ ./easyrsa build-client-full $user nopass # æ•´ç†ä¸‹ç”Ÿæˆçš„æ–‡ä»¶ mkdir -p $OVPN_USER_KEYS_DIR/$user cp $PKI_DIR/ca.crt $OVPN_USER_KEYS_DIR/$user/ # CA æ ¹è¯ä¹¦ cp $PKI_DIR/issued/$user.crt $OVPN_USER_KEYS_DIR/$user/ # å®¢æˆ·ç«¯è¯ä¹¦ cp $PKI_DIR/private/$user.key $OVPN_USER_KEYS_DIR/$user/ # å®¢æˆ·ç«¯è¯ä¹¦å¯†é’¥ cp /etc/openvpn/client/sample.ovpn $OVPN_USER_KEYS_DIR/$user/$user.ovpn # å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ sed -i 's/admin/'&quot;$user&quot;'/g' $OVPN_USER_KEYS_DIR/$user/$user.ovpn cp /etc/openvpn/server/certs/ta.key $OVPN_USER_KEYS_DIR/$user/ta.key # auth-tls æ–‡ä»¶ cd $OVPN_USER_KEYS_DIR zip -r $user.zip $user done exit 0 æ‰§è¡Œè„šæœ¬ï¼š sh ovpn_user.sh &lt;username&gt; æœåŠ¡å™¨æ²¡æœ‰zipçš„è¯è®°å¾—æ‰‹åŠ¨å®‰è£… è¿è¡ŒæˆåŠŸä¼šåœ¨ /etc/openvpn/client/keys ç›®å½•ä¸‹ç”Ÿæˆä»¥ç”¨æˆ·åå‘½åçš„ zip æ‰“åŒ…æ–‡ä»¶ï¼Œå°†è¯¥å‹ç¼©åŒ…ä¸‹è½½åˆ°æœ¬åœ°è§£å‹ï¼Œç„¶åå°†è§£å‹æ–‡ä»¶å…¨éƒ¨æ”¾åˆ°openvpnè½¯ä»¶çš„configé‡Œé¢ï¼Œæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š . â”œâ”€â”€ ca.crt â”œâ”€â”€ username.crt â”œâ”€â”€ username.key â”œâ”€â”€ username.ovpn â””â”€â”€ ta.key åˆ é™¤ä¸€ä¸ªç”¨æˆ· OpenVPN çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è®¤è¯ä¸»è¦é€šè¿‡ SSL è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯ï¼Œæ‰€ä»¥åªè¦åŠé”€å¯¹åº”ç”¨æˆ·çš„ SSL è¯ä¹¦å³å¯ã€‚ ç¼–è¾‘OpenVPNæœåŠ¡ç«¯é…ç½®server.confï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š crl-verify /etc/openvpn/easy-rsa/3/pki/crl.pem åŠé”€ç”¨æˆ·è¯ä¹¦ cd /etc/openvpn/easy-rsa/3.0.3/ ./easyrsa revoke username #éœ€è¦åˆ é™¤çš„ç”¨æˆ·å ./easyrsa gen-crl é‡å¯OpenVPNæœåŠ¡ç«¯ä½¿å…¶ç”Ÿæ•ˆ systemctl start openvpn@server å¯¹åº”è„šæœ¬ï¼š del_ovpn_user.sh: # ! /bin/bash set -e OVPN_USER_KEYS_DIR=/etc/openvpn/client/keys EASY_RSA_VERSION=3 EASY_RSA_DIR=/etc/openvpn/easy-rsa/ for user in &quot;$@&quot; do cd $EASY_RSA_DIR/$EASY_RSA_VERSION echo -e 'yes\\n' | ./easyrsa revoke $user ./easyrsa gen-crl # åŠé”€æ‰è¯ä¹¦åæ¸…ç†å®¢æˆ·ç«¯ç›¸å…³æ–‡ä»¶ if [ -d &quot;$OVPN_USER_KEYS_DIR/$user&quot; ]; then rm -rf $OVPN_USER_KEYS_DIR/${user}* fi systemctl restart openvpn@server done exit 0 åŸæ–‡å‚è€ƒï¼š å…³äº open VPN å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é…ç½®æ–‡ä»¶é…ç½®é¡¹è¯´æ˜ï¼šå¾ˆå…¨é¢ï¼Œå¯ä»¥éšæ—¶æŸ¥çœ‹ä¸æ‡‚çš„é…ç½®é¡¹ OpenVPN å®˜ç½‘ Centos7 å®‰è£… OpenVPN Centos7 å®‰è£… OpenVPN åŠé”€å®¢æˆ·ç«¯è¯ä¹¦ åŠé”€å®¢æˆ·ç«¯è¯ä¹¦ open VPN ä¸€äº›å¸¸è§é—®é¢˜ æœ¬åœ°å…¬ç½‘ ip æŸ¥çœ‹ ","link":"https://yuchuanghui.github.io/post/openvpn/"},{"title":"openssh","content":"ä¸»è¦æ˜¯å¯ä»¥åœ¨ç»ˆç«¯å°±å¯ä»¥ç›´æ¥è¿æ¥ä¸»æœºè¿›è¡Œæ“ä½œï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„scpä¼ é€’æ–‡ä»¶ï¼Œä»Šå¤©å‘ç°åœ¨windowsä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œåœ¨åº”ç”¨åŠŸèƒ½-&gt;å¯é€‰åŠŸèƒ½ä¸­å¯ä»¥é€‰æ‹©å®‰è£…openssh-cilentå’Œserverï¼Œé»˜è®¤æ˜¯å®‰è£…å¥½çš„ã€‚ 1ã€åŸºæœ¬ä½¿ç”¨ ssh root@&lt;ip address&gt; ç„¶åè¾“å…¥å¯†ç  2ã€ä¼ è¾“æ–‡ä»¶ scp &lt;file-path&gt; root@&lt;ip address&gt;:&lt;target path&gt; 3ã€å…¬é’¥ç™»å½• åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç”Ÿæˆå…¬é’¥ç§é’¥ ssh-keygen -t rsa è¿›å…¥åˆ°å…¬é’¥æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œå°†å…¶å¤åˆ¶åˆ°æœåŠ¡å™¨ä¸­ cd &lt;path&gt; scp id_rsa.pub root@&lt;ip&gt;:~/.ssh/authorized_keys å¦‚æœæ˜¾ç¤ºæ— è·¯å¾„å°±åœ¨æœåŠ¡å™¨æ–°å»ºæ–‡ä»¶å¤¹.sshå’Œæ–‡ä»¶authorized_keys è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½® ssh_config ä¿®æ”¹IdentityFile ~/.ssh/id_rsa(é™¤å»æ³¨é‡Š) sshd_config ä¿®æ”¹RSAAuthentication yes(æ²¡æœ‰è¯¥æ¡å°±ä¸ç®¡) PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keysï¼ˆæ³¨æ„å’Œä¸Šé¢è·¯å¾„ä¸€è‡´ï¼Œä¸€èˆ¬æ˜¯ä¸€æ ·çš„ï¼‰ é…ç½®å®Œæˆï¼Œä¹‹åè¿æ¥å°±ä¸éœ€è¦è¾“å…¥å¯†ç äº† ","link":"https://yuchuanghui.github.io/post/openssh/"},{"title":"Opensshä½¿ç”¨å°è®°","content":"ä¸»è¦æ˜¯å¯ä»¥åœ¨ç»ˆç«¯å°±å¯ä»¥ç›´æ¥è¿æ¥ä¸»æœºè¿›è¡Œæ“ä½œï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„scpä¼ é€’æ–‡ä»¶ï¼Œä»Šå¤©å‘ç°åœ¨windowsä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œåœ¨åº”ç”¨åŠŸèƒ½-&gt;å¯é€‰åŠŸèƒ½ä¸­å¯ä»¥é€‰æ‹©å®‰è£…openssh-cilentå’Œserverï¼Œé»˜è®¤æ˜¯å®‰è£…å¥½çš„ã€‚ 1ã€åŸºæœ¬ä½¿ç”¨ ssh root@&lt;ip address&gt; ç„¶åè¾“å…¥å¯†ç  2ã€ä¼ è¾“æ–‡ä»¶ scp &lt;file-path&gt; root@&lt;ip address&gt;:&lt;target path&gt; 3ã€å…¬é’¥ç™»å½• åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç”Ÿæˆå…¬é’¥ç§é’¥ ssh-keygen -t rsa è¿›å…¥åˆ°å…¬é’¥æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œå°†å…¶å¤åˆ¶åˆ°æœåŠ¡å™¨ä¸­ cd &lt;path&gt; scp id_rsa.pub root@&lt;ip&gt;:~/.ssh/authorized_keys å¦‚æœæ˜¾ç¤ºæ— è·¯å¾„å°±åœ¨æœåŠ¡å™¨æ–°å»ºæ–‡ä»¶å¤¹.sshå’Œæ–‡ä»¶authorized_keys 3. è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½® ssh_config ä¿®æ”¹IdentityFile ~/.ssh/id_rsa(é™¤å»æ³¨é‡Š) sshd_config ä¿®æ”¹RSAAuthentication yes(æ²¡æœ‰è¯¥æ¡å°±ä¸ç®¡) PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keysï¼ˆæ³¨æ„å’Œä¸Šé¢è·¯å¾„ä¸€è‡´ï¼Œä¸€èˆ¬æ˜¯ä¸€æ ·çš„ï¼‰ é…ç½®å®Œæˆï¼Œä¹‹åè¿æ¥å°±ä¸éœ€è¦è¾“å…¥å¯†ç äº† ","link":"https://yuchuanghui.github.io/post/openssh-shi-yong-xiao-ji/"},{"title":"å…³äº","content":" æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤ ğŸ  å…³äºæœ¬ç«™ åˆ†äº«æœ‰è¶£æœ‰ç”¨çš„çŸ¥è¯† ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è° ä¸‰æ—¥åŠä¸» â›¹ å…´è¶£çˆ±å¥½ éª‘è½¦ã€ç»„è½¦ã€å¥èº«ã€è½»å°è¯´ã€æ‘¸é±¼ï¼ˆä¸æ˜¯ ğŸ“¬ è”ç³»æˆ‘å‘€ æœ‰ç¼˜å³å¯ ","link":"https://yuchuanghui.github.io/post/about/"}]}